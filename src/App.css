:root { --glass: rgba(255,255,255,.12); --ring: rgba(255,255,255,.5); }

* { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; }
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; }

.lock-bg {
  position: relative; min-height: 100%;
  background: radial-gradient(1200px 800px at 20% -10%, #ffafcc55, transparent),
              radial-gradient(1200px 800px at 120% 20%, #bde0fe55, transparent),
              linear-gradient(120deg, #ffafcc 0%, #a2d2ff 100%);
  display: grid; place-items: center; overflow: hidden;
}

.overlay {
  position: absolute; inset: 0;
  backdrop-filter: blur(4px) saturate(120%);
}

.card {
  position: relative; z-index: 1;
  width: min(92vw, 580px); padding: 2rem 1.3rem 1.6rem;
  background: var(--glass); border: 1px solid #ffffff30;
  border-radius: 16px; color: #fff;
  box-shadow: 0 10px 30px rgba(0,0,0,.2);
  animation: pop .5s ease both;
}
@keyframes pop { from { transform: translateY(6px); opacity: 0 } to { transform: none; opacity: 1 } }

h1 { margin: 0 0 .25rem; }
.subtitle { margin: 0 0 1rem; opacity: .9 }

.quiz { display: grid; gap: 1rem; }
.field { display: grid; gap: .4rem; }
label { font-weight: 600; }

input, select {
  width: 100%; padding: .75rem .9rem; border-radius: 10px;
  border: 1px solid #ffffff40; background: #ffffff20; color: #fff;
  outline: none;
}
input::placeholder { color: #ffffffaa; }

.btn {
  padding: .8rem 1.2rem; border-radius: 999px; border: 0;
  background: #ffe5ec; color: #d81159; font-weight: 700; cursor: pointer;
}
.btn:disabled { opacity: .6; cursor: not-allowed; }

.error { background: #ff3b30; color: #fff; padding: .5rem .75rem; border-radius: 8px; }

.hint { opacity: .8 }

.hearts {
  position: absolute; inset: 0; pointer-events: none; z-index: 0;
}
.hearts span {
  position: absolute; font-size: 20px; opacity: .6;
  animation: float 10s linear infinite;
}
@keyframes float {
  from { transform: translateY(110vh) translateX(0) rotate(0deg); }
  to   { transform: translateY(-10vh) translateX(20px) rotate(360deg); }
}
/* posiciones aleatorias sencillas */
.hearts span:nth-child(1){ left:5%; animation-duration:9s }
.hearts span:nth-child(2){ left:15%; animation-duration:12s; animation-delay:1s }
.hearts span:nth-child(3){ left:25%; animation-duration:10s; animation-delay:.5s }
.hearts span:nth-child(4){ left:35%; animation-duration:11s; animation-delay:2s }
.hearts span:nth-child(5){ left:45%; animation-duration:9.5s; animation-delay:1.5s }
.hearts span:nth-child(6){ left:55%; animation-duration:13s; animation-delay:.8s }
.hearts span:nth-child(7){ left:65%; animation-duration:9s; animation-delay:2.2s }
.hearts span:nth-child(8){ left:75%; animation-duration:12s; animation-delay:1.2s }
.hearts span:nth-child(9){ left:85%; animation-duration:10s; animation-delay:2.5s }
.hearts span:nth-child(10){ left:50%; animation-duration:11s; animation-delay:1.7s }
.hearts span:nth-child(11){ left:30%; animation-duration:13.5s; animation-delay:.3s }
.hearts span:nth-child(12){ left:70%; animation-duration:9.7s; animation-delay:2.9s }

.gradient-title {
  text-align: center;
  font-weight: 900;
  line-height: 1.1;
  font-size: 2rem; /* ajusta al gusto */

  /* Gradiente con más colores */
  background: linear-gradient(
    270deg,
    #ff4d6d,
    #ffafcc,
    #a2d2ff,
    #bde0fe,
    #ff4d6d
  );
  background-size: 800% 800%;   /* mucho más grande para que tenga recorrido */
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;

  animation: titleGradient 12s ease infinite;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.25));
}

@keyframes titleGradient {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

select {
  background: rgba(255, 255, 255, 0.2);
  color: #fff;
  border: 1px solid #ffffff40;
  border-radius: 10px;
  padding: .75rem .9rem;
  appearance: none; /* quita flecha nativa (opcional) */
}

select option {
  background: #a2d2ff;   /* color de fondo de las opciones */
  color: #000;           /* texto oscuro para contrastar */
}
/* Contenedor de slides (usa tu fondo lock-bg existente) */
.slides-root { position: relative; min-height: 100dvh; }

/* Zona visible de contenido, deja hueco para la navegación fija */
.slides-viewport {
  position: relative;
  width: 100%;
  min-height: 100dvh;
  padding: 24px 16px calc(96px + env(safe-area-inset-bottom));
  display: grid;
  place-items: center;
}

/* Barra de navegación inferior */
.slides-nav {
  position: fixed;
  left: 0; right: 0; bottom: 0;
  display: flex; justify-content: space-between; align-items: center;
  padding: 12px calc(16px + env(safe-area-inset-right))
           calc(12px + env(safe-area-inset-bottom))
           calc(16px + env(safe-area-inset-left));
  background: transparent; /* dejamos ver tu fondo */
  pointer-events: none;    /* para que sólo los botones reciban clic */
}

.nav-btn {
  pointer-events: auto;
  width: 56px; height: 56px; border-radius: 999px;
  display: grid; place-items: center;
  border: 1px solid #ffffff40;
  background: rgba(255,255,255,0.18);
  color: #fff; cursor: pointer;
  backdrop-filter: blur(8px) saturate(140%);
}
.nav-btn:disabled { opacity: .45; cursor: not-allowed; }
.nav-btn:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }

/* Que la overlay no bloquee clics ni tape */
.overlay { pointer-events: none; z-index: 0; }

/* La barra de navegación por encima */
.slides-nav { z-index: 3; 
  background: linear-gradient(to top, rgba(0,0,0,.16), rgba(0,0,0,0)); }

/* Botones más visibles */
.nav-btn {
  background: rgba(255,255,255,0.38);
  border: 1px solid rgba(255,255,255,0.85);
  color: #ffffff;
  box-shadow: 0 6px 22px rgba(0,0,0,.28);
}

/* Aunque estén deshabilitados, que no desaparezcan del todo */
.nav-btn:disabled { opacity: .75; cursor: not-allowed; }
/* Que la overlay no bloquee */
.overlay { pointer-events: none; z-index: 0; }

/* Barra inferior centrada */
.slides-nav {
  position: fixed; left: 0; right: 0; bottom: 0;
  display: flex; justify-content: center; align-items: center;
  padding: 12px calc(16px + env(safe-area-inset-right))
           calc(12px + env(safe-area-inset-bottom))
           calc(16px + env(safe-area-inset-left));
  background: linear-gradient(to top, rgba(0,0,0,.12), rgba(0,0,0,0));
  pointer-events: none;   /* sólo los hijos reciben clic */
  z-index: 3;
}

/* Grupo centrado con flechas y corazón */
.nav-row {
  display: flex; align-items: center; gap: 14px;
  pointer-events: auto;
  border-radius: 999px;
  backdrop-filter: blur(8px) saturate(140%);
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.35);
  padding: 8px 12px;
  box-shadow: 0 6px 22px rgba(0,0,0,.25);
}

/* Botones */
.nav-btn {
  width: 44px; height: 44px; border-radius: 999px;
  display: grid; place-items: center;
  border: 1px solid rgba(255,255,255,0.85);
  background: rgba(255,255,255,0.3);
  color: #fff; cursor: pointer;
}
.nav-btn:disabled { opacity: .75; cursor: not-allowed; }
.nav-btn:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }

/* Corazón centrado en la nav */
.nav-heart {
  font-size: clamp(28px, 7vw, 44px);
  line-height: 1;
  background: linear-gradient(-45deg, #ff4d6d, #ffafcc, #a2d2ff, #bde0fe, #ff4d6d);
  background-size: 400% 400%;
  -webkit-background-clip: text; background-clip: text;
  color: transparent;
  animation: titleGradient 12s ease infinite, heartPulse 2.4s ease-in-out infinite;
  filter: drop-shadow(0 4px 12px rgba(0,0,0,.25));
}
@keyframes heartPulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.06)} }
:root { --nav-h: 72px; } /* altura aprox. de la barra inferior */

/* Contenedor de la escena */
.scene {
  position: relative;
  width: 100%;
  height: 100%;
}

/* Carta arriba con estilo de tarjetita */
.letter-card {
  position: absolute;
  top: clamp(16px, 7vh, 64px);
  left: 50%;
  transform: translateX(-50%);
  width: min(92vw, 680px);
  padding: 1.1rem 1rem;
  color: #fff;
  border: 1px solid #ffffff30;
  border-radius: 14px;
  background: rgba(255,255,255,.12);
  backdrop-filter: blur(8px) saturate(140%);
  box-shadow: 0 10px 30px rgba(0,0,0,.2);
}
/* Fondo del modal */
.modal-backdrop {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(2px);
  z-index: 99;
}
/* Contenedor que apila las tarjetas una debajo de otra */
.card-stack {
  position: absolute;
  top: clamp(16px, 7vh, 64px);
  left: 50%;
  transform: translateX(-50%);
  width: min(92vw, 680px);
  display: grid;
  gap: 12px; /* separación entre carta y mensajes */
}

/* Dentro del stack anulamos la posición absoluta de .letter-card */
.card-stack .letter-card {
  position: relative;   /* en flujo normal */
  top: auto; left: auto; transform: none;
  width: 100%;
}
.messages-card {
  background: var(--glass);
  border: 1px solid #ffffff30;
  border-radius: 14px;
  padding: 1rem;
  color: #fff;
  width: min(92vw, 600px);
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 10px 30px rgba(0,0,0,.3);
  animation: pop .4s ease both;
}

.messages-list {
  display: flex;
  flex-direction: column;
  gap: .6rem;
  margin-top: .5rem;
}

.msg-bubble {
  padding: .6rem .9rem;
  border-radius: 14px;
  max-width: 75%;
  box-shadow: 0 2px 6px rgba(0,0,0,.15);
}

.msg-bubble.left {
  align-self: flex-start;
  background: #e1ffc7;
  color: #222;
}

.msg-bubble.right {
  align-self: flex-end;
  background: #dcf8c6;
  color: #222;
}
/* Overlay a negro (ya lo tenías) */
.blackout {
  position: fixed;
  inset: 0;
  background: #000;
  opacity: 0;
  transition: opacity 2s ease;
  z-index: 9999;     /* cubre todo */
  pointer-events: none;
}
.blackout.show { opacity: 1; }

/* Mensaje centrado por encima del blackout con fade in/out */
.love-msg {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  opacity: 0;
  transition: opacity .35s ease;
  z-index: 10000;    /* por encima del blackout */
  pointer-events: none;
}
.love-msg.show { opacity: 1; }
.love-msg.hide { opacity: 0; }

.love-msg-box {
  color: #fff;
  font-weight: 800;
  text-align: center;
  font-size: clamp(20px, 6vw, 42px);
  line-height: 1.2;
  padding: 16px 24px;
  border-radius: 14px;
  text-shadow: 0 2px 10px rgba(0,0,0,.6);
}

/* Cuando debe aparecer la barra inferior encima del negro */
.slides-nav.nav-top {
  z-index: 10001;    /* mayor que el blackout (9999) y que el mensaje (10000) */
}
/* ---------- Parallax Solar ---------- */
.parallax-root{
  position:fixed; inset:0; margin:auto; display:grid; place-items:center;
  pointer-events:none; z-index:10000;
  --tiltX: 0deg; --tiltY: 0deg;
}
.parallax-camera{ width:100%; height:100%; perspective:950px; perspective-origin:50% 50%; }
.parallax-scene{
  width:100%; height:100%;
  transform-style:preserve-3d; transform-origin:50% 50% 0;
  /* parallax con el puntero */
  transform: rotateX(var(--tiltX)) rotateY(var(--tiltY));
}

/* --- estrellas (3 capas) --- */
.stars-layer{
  position:absolute; left:50%; top:50%;
  width:100%; height:100%;
  transform-style:preserve-3d; transform-origin:50% 50% 0;
  transform: translate(-50%,-50%) translateZ(var(--z)) scale(var(--scale));
  opacity:.9; pointer-events:none;
}
.star-dot{
  position:absolute; left:50%; top:50%;
  background:#fff; border-radius:50%;
  box-shadow:0 0 6px rgba(255,255,255,.8);
}

/* --- sol --- */
.sun-2d{ position:absolute; left:50%; top:50%; translate:-50% -50%; }
.sun-core{
  display:grid; place-items:center;
  width:clamp(44px,8vw,72px); height:clamp(44px,8vw,72px); border-radius:50%;
  background: radial-gradient(circle at 35% 35%, #fff 0%, #ffd2e0 40%, #ff5d8f 80%);
  color:#fff; font-size:clamp(18px,4.5vw,28px); font-weight:900;
  text-shadow:0 2px 12px rgba(0,0,0,.3);
  box-shadow:0 0 40px 12px rgba(255, 93, 143, .35);
}
.sun-glow{ position:absolute; inset:-30%; border-radius:50%;
  background: radial-gradient(circle, rgba(255,93,143,.25), transparent 60%);
  filter:blur(8px); pointer-events:none; }

/* --- anillos: profundidad + giro propio --- */
.ring3d{
  position:absolute; left:50%; top:50%;
  transform-style:preserve-3d; transform-origin:50% 50% 0;
  transform: translate(-50%,-50%) translateZ(var(--z));
}
.ring-spin{
  position:absolute; inset:0;
  transform-style:preserve-3d; transform-origin:50% 50% 0;
  transform: rotateX(var(--tilt));
  animation: ringSpin linear infinite;
}

.ring-line{
  position:absolute; inset:0; border-radius:50%;
  border:1px dashed rgba(255,255,255,.32);
}

/* --- planetas + etiquetas --- */
.arm{
  position:absolute; left:50%; top:50%; translate:-50% -50%;
  transform-origin:50% 50% 0; transform-style:preserve-3d;
  animation: armSpin linear infinite;  /* gira con el anillo */
}
@keyframes armSpin{ from{ rotate:var(--start); } to{ rotate:calc(var(--start) + 360deg); } }

.planet{ transform: translateY(var(--r)); transform-style:preserve-3d; }
.dot{
  display:inline-block; border-radius:999px; margin-right:8px;
  background: radial-gradient(circle at 35% 35%, #fff, #c8e1ff);
  box-shadow: 0 0 10px rgba(164,211,255,.5), 0 12px 20px rgba(0,0,0,.35);
}

/* Mantener texto horizontal y mirando a cámara */
.label-rot{ display:inline-block; transform-style:preserve-3d;
  animation: labelCounter linear infinite; }
@keyframes labelCounter{ from{ rotate:0deg; } to{ rotate:-360deg; } }

.label-face{
  display:inline-block; color:#fff; font-weight:800; white-space:nowrap;
  text-shadow:0 1px 2px rgba(0,0,0,.35), 0 0 12px rgba(255,255,255,.18);
  /* billboarding respecto al tilt (parallax) */
  transform: rotateY(calc(-1 * var(--tiltY))) rotateX(calc(-1 * var(--tiltX)));
  transform-style:preserve-3d;
}
